# Vim 用法

## Vim快捷键练习利器----VimTutor
`Vimtutor`是新手可以快速入门`Vim`的一个`Vim`内置应用，直接在`Vim`命令行下，敲`Vimtutor`，回车即可进入练习

1. 拷贝教程文件。你可以用 Vim 来完成这个工作 (Vim 知道文件的位置)
    ```
        vim -u NONE -c 'e $VIMRUNTIME/tutor/tutor' -c 'w! TUTORCOPY' -c 'q'
    ```
    这个命令在当前路径下建立一个 `TUTORCOPY` 的文件。要使用其它语言的版本，在文件名后加上双字母的语言缩写作为扩展名。对于法语:
    ```
        vim -u NONE -c 'e $VIMRUNTIME/tutor/tutor.fr' -c 'w! TUTORCOPY' -c 'q'
    ```
2. 用 Vim 编辑这个被拷贝的文件
    ```
        vim -u NONE -c "set nocp" TUTORCOPY
    ```
    其它几个参数用于保证 Vim 使用正确的模式启动。

3. 学习完成后删除临时拷贝文件
    ```
        del TUTORCOPY
    ```
4. 中文文件
    ```
        https://github.com/vim/vim/blob/master/runtime/tutor/tutor.zh_cn.utf-8
    ```
## Vim的三种模式
```
命令行模式（Command mode）

插入模式（Insert mode）

底行模式（Lastline mode）
```
#### 命令行模式

> 控制屏幕光标的移动，字符、字或行的删除，移动复制某区段及进入Insert mode下，或者到 last line mode。

#### 插入模式
> 只有在Insert mode下，才可以做文字输入，按「ESC」键可回到命令行模式。

#### 底行模式
> 将文件保存或退出vim，也可以设置编辑环境，如寻找字符串、列出行号……等。

## Vim的基本操作

### 打开 保存 退出

**在命令模式下**

|命令|功能|
|---|---|
| :e test.md | 打开 test.md文件, 如果不存在则创建。|
| :w | 保存|
| :w! | 强制保存|
| :q | 退出|
| :wq | 保存并退出|
| :x | 同:wq|
| :q!| 强制退出,不保存并退出|

### 移动光标
```
    ※※ 要移動光標，請依照說明分別按下 h、j、k、l 鍵。 ※※

             ^
             k               h 的键位于左边，每次按下就会向左移动。
       < h       l >        l 的键位于右边，每次按下就会向右移动。
             j              j 键看起来很象一支尖端方向朝下的箭头。
             v
```
### 光标定位

| 命令 | 功能 |
|---|---|
| CTRL+g | 在页面的底部会呈现一个信息，指出文件名和当前文件位置 |
| `[line number]+G` | 移动到指定行数 |
| gg | 可以使得当前光标直接跳转到文件第一行 |
| G | 可以使得当前光标直接跳转到文件最后一行 |
### 添加文本
|命令|功能|
|----|---|
| i | 从当前光标位置进入插入模式 |
| a | 从当前光标位置的下一个字符进入插入模式 |
| A | 不管光标在该行的什么位置，直接按大写字母「A」即可在行尾添加 |
| o | 从当前光标位置的下一行进入插入模式 |
| O | 在光标前插入一行 |


### 删除命令
|命令|功能|
|----|---|
| x | 删除光标处的一个字符 |
| dw | 可以从光标处删除至一个单词的末尾 |
| de | 可以从光标处删除至一个单词的末尾 , 无视下个单词前的空格 |
| d$ | 从当前光标删除到行末 |


 使用删除操作符 d 的删除命令的格式如下：
```
    d   motion
```
  其中：
```
    d      - 删除操作符。
    motion - 操作符的操作对象(在下面列出)。
```

一个简短的动作列表：
```
    w - 从当前光标当前位置直到下一个单词起始处，不包括它的第一个字符。
    e - 从当前光标当前位置直到单词末尾，包括最后一个字符。
    $ - 从当前光标当前位置直到当前行末。
```
使用操作符时输入数字可以使它重复那么多次。

```
    d   number(数字)   motion
```

  1. 移动光标到下面标记有 ---> 的一行中第一个大写字母单词上。

  2. 输入 `d2w`以删除两个大写字母单词。

#### motion动作列表
| 命令 | 功能 |
|---|---|
| w | 到下一个单词头，除开所在的第一个字符。 |
| b | 到上一个单词头，包括所在单词的第一个字符。 |
| e | 到下一个单词尾，包括所在单词的最后一个字符。 |
| $ | 到行尾，包括了最后一个字符。 |
| 0 | 到行首，包含空格。 |
| ^ | 到行首，不含空格。 |
| G | 到文本最后一行首 |
| gg | 到文本首行。 |

#### 删除行
**输入 dd 可以删除整一个当前行**

  鉴于整行删除的高频度，Vi 的设计者决定要简化整行删除操作，您仅需要在同一行上
  击打两次 d 就可以删除掉光标所在的整行了。

|命令|功能|
|----|---|
| dd | 删除整行 |
| 2dd | 删除两行 |

### 撤消类命令

|命令|功能|
|----|---|
| u | 恢复之前的动作 |
| U | 恢复对一行的所有改变 |
| CTRL+R | 反恢复 |
### 置入类命令

|命令|功能|
|----|---|
| p | 将最后一次删除的内容置入光标之后。|
### 替换类命令

|命令|功能|
|----|---|
| r | 输入 r 和一个字符替换光标所在位置的字符 |
| R | 输入大写的 R 可连续替换多个字符 |

### 更改类命令
|命令|功能|
|----|---|
| c | 修改，功能等于删除单词并定位到插入模式。c 和 d 一样属于操作码 |

更改类操作符的工作方式跟删除类是一致的。操作格式是：
```
    c    [number]   motion
```
### 搜索类命令

|命令|功能|
|----|---|
| `/keyword<Enter>` | 搜索 |
| `?keyword<Enter>` | 反向搜索 |
| `n` | 搜索下一条 |
| `N` | 搜索上一条 |
| `CTRL+o` | 回到您之前的位置,重复按可以回退更多步 |
| `CTRL+i` |  会跳转到较新的位置。|
| `%` | `括号匹配搜索，可匹配 (,),[,],{ or }`|

### 替换命令

| 命令 | 功能 |
|---|---|
| :s/old/new | 替换本行第一个的 |
| :s/old/new/g | 替换本行所有的 |
| :%s/old/new/g | 更改全文件中的所有 |
| :%s/old/new/gc | 更改全文件中的所有,并给出替换与否的提示 |
| :#,#s/old/new/g | #,#是要更改的行号的范围 |

### 复制文本

| 命令 | 功能 |
|---|---|
| y | 抽出(复制)高亮的文本。|
| p | 粘贴文本 |

  1. 将光标定位到想要复制的一行，

  2. 接着使用 v 进入可视模式，移动光标到 想要复制的单词 的前面。

  3. 现在输入 y 以抽出(复制)高亮的文本。

  4. 然后移动光标到要复制的位置

  5. 接着输入 p 以放置(粘贴)复制了的文本

### 执行外部命令

| 命令 | 功能 |
|---|---|
| :!command | :!command 执行外部 shell 命令。例如 :!ls |
| :w FILENAME | 将当前的vim 文件以FILENAME 文件名写进磁盘 |
| v motion :w FILENAME | 保存选定选择行到FILENAME 文件 |
| :r FILENAME | 恢复磁盘文件FILENAME到光标下 |
| :r !ls | 读取 ls 命令的输出并粘贴到光标下 |

### 设置类命令

| 命令 | 功能 |
|---|---|
| :set xxx | 进入替换模式，直到<esc>按下 |
| 'ic' 'ignorecase' | 搜索时忽略大小写，例如 :set ic |
| 'is' 'incsearch' | 部分显示匹配的搜索短语 |
| 'hls' 'hlsearch' | 高亮所有匹配的短语 |
| :set noic  | 前置”no"以关闭选项 |

### 获取帮助信息

| 命令 | 功能 |
|---|---|
| :help |  <F1> 或<help>以打开帮助窗口 |
| :help cmd | 找出关于cmd的帮助 |
| CTRL+w | 跳转到另一窗口 |
|  :command, press CTRL+d | 以查看可能的补齐 |
